import{_ as i,o as a,c as t,ag as e}from"./chunks/framework.FundgpKU.js";const n="/flutterQuiz/assets/image-20230917081238786.Ba2ijeqS.webp",o=JSON.parse('{"title":"第1节：三棵树","description":"","frontmatter":{},"headers":[],"relativePath":"Chapter1/tree.md","filePath":"Chapter1/tree.md","lastUpdated":1770253889000}'),h={name:"Chapter1/tree.md"};function l(p,s,k,r,d,E){return a(),t("div",null,[...s[0]||(s[0]=[e('<h1 id="第1节-三棵树" tabindex="-1">第1节：三棵树 <a class="header-anchor" href="#第1节-三棵树" aria-label="Permalink to &quot;第1节：三棵树&quot;">​</a></h1><h3 id="widget-element-renderobject的关系-他们是如何协作的" tabindex="-1">Widget\\Element\\RenderObject的关系？他们是如何协作的？ <a class="header-anchor" href="#widget-element-renderobject的关系-他们是如何协作的" aria-label="Permalink to &quot;Widget\\Element\\RenderObject的关系？他们是如何协作的？&quot;">​</a></h3><p><img src="'+n+`" alt="三棵树图片" title="渲染流程建立的三棵树"></p><p>​ 图一 flutter的三棵树</p><h5 id="思考-如果想打印出某个指定widget从开始build到渲染到屏幕上面所花费的时间-可能实现吗" tabindex="-1">思考：如果想打印出某个指定widget从开始build到渲染到屏幕上面所花费的时间，可能实现吗？ <a class="header-anchor" href="#思考-如果想打印出某个指定widget从开始build到渲染到屏幕上面所花费的时间-可能实现吗" aria-label="Permalink to &quot;思考：如果想打印出某个指定widget从开始build到渲染到屏幕上面所花费的时间，可能实现吗？&quot;">​</a></h5><p>答案是无法直接打印出，因为该各个widget的构建、布局、和渲染是相互并存交叉的。</p><p>而是只能通过注释掉该widget的构建，并打印对比注释前后渲染一帧所需的时间估算渲染时间差,如下代码</p><div class="language-dart vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dart</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  @override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> startTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DateTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().microsecondsSinceEpoch;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    WidgetsBinding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.instance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addPostFrameCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((_) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 在每一帧渲染后调用</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> endTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DateTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().microsecondsSinceEpoch;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;one frame cost：</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">endTime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">startTime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mcrosencond&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//打印出第一帧渲染所需要的时间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span></code></pre></div><p>或者通过dev tools 里面的performance layer的图层来分析</p>`,9)])])}const c=i(h,[["render",l]]);export{o as __pageData,c as default};
